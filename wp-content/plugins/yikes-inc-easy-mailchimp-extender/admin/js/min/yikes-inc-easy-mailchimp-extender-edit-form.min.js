function togglePageRedirection(e){var i=jQuery("#enable-ajax").is(":checked");1==e.value?(jQuery("#redirect-user-to-selection-label").fadeIn(),!0===i&&jQuery(".redirect-new-window-div").fadeIn()):jQuery("#redirect-user-to-selection-label, .redirect-new-window-div").fadeOut()}function storeGlobalClicked(e){var i=e.parents("td").find("input").attr("name");jQuery(".clicked-input").val(i)}function populateDefaultValue(e){var i=jQuery(".clicked-input").val();jQuery(".clicked-input").val(""),tb_remove(),jQuery('input[name="'+i+'"]').val(e)}function toggle_nested_section(e){switch(jQuery(e).val()){case"image":jQuery(".submit-button-type-text").fadeOut("fast",function(){jQuery(".submit-button-type-image").fadeIn("fast")});break;case"text":jQuery(".submit-button-type-image").fadeOut("fast",function(){jQuery(".submit-button-type-text").fadeIn("fast")});break;default:case"1":"yikes-easy-mc-form-schedule"==jQuery(e).attr("name")?jQuery(".date-restriction-section").fadeToggle():jQuery(".login-restriction-section").fadeToggle()}return!1}function initialize_form_schedule_time_pickers(){jQuery(".date-picker").datepicker({numberOfMonths:1,showButtonPanel:!0,closeText:window.yikes_mailchimp_edit_form.closeText,currentText:window.yikes_mailchimp_edit_form.currentText,monthNames:window.yikes_mailchimp_edit_form.monthNames,monthNamesShort:window.yikes_mailchimp_edit_form.monthNamesShort,dayNames:window.yikes_mailchimp_edit_form.dayNames,dayNamesShort:window.yikes_mailchimp_edit_form.dayNamesShort,dayNamesMin:window.yikes_mailchimp_edit_form.dayNamesMin,dateFormat:window.yikes_mailchimp_edit_form.dateFormat,firstDay:window.yikes_mailchimp_edit_form.firstDay,isRTL:window.yikes_mailchimp_edit_form.isRTL,onSelect:function(e,i){event.preventDefault(),yikes_check_valid_date(e,i.lastVal,i.id)}}),jQuery(".time-picker").timepicker({scrollDefault:"now",timeFormat:"h:i A"}),jQuery(".time-picker").on("changeTime",function(e){var i=jQuery(this).attr("id");yikes_check_valid_date(jQuery("#yikes-easy-mc-form-restriction-start-date").val(),jQuery("#yikes-easy-mc-form-restriction-end-date").val(),i)})}function yikes_check_valid_date(e,i,t){var a=jQuery("#yikes-easy-mc-form-restriction-start-date").val(),s=yikes_12_to_24_hour_time_conversion(jQuery("#yikes-easy-mc-form-restriction-start-time").val()),n=jQuery("#yikes-easy-mc-form-restriction-end-date").val(),r=yikes_12_to_24_hour_time_conversion(jQuery("#yikes-easy-mc-form-restriction-end-time").val());if(new Date(a+" "+s)>new Date(n+" "+r)){if("yikes-easy-mc-form-restriction-start-date"!=t&&"yikes-easy-mc-form-restriction-end-date"!=t||jQuery("#"+t).val(i),jQuery(".date-restriction-section").find("p.description.error").length)return;jQuery(".date-restriction-section").first().find("p.description").after('<p class="description error">'+window.yikes_mailchimp_edit_form.start_date_exceeds_end_date_error+"</p>")}else jQuery(".date-restriction-section").find("p.description.error").remove()}function yikes_12_to_24_hour_time_conversion(e){if(!e)return"";var i=Number(e.match(/^(\d+)/)[1]),t=Number(e.match(/:(\d+)/)[1]),a=e.match(/\s(.*)$/)[1];"PM"==a&&i<12&&(i+=12),"AM"==a&&12==i&&(i-=12);var s=i.toString(),n=t.toString();return i<10&&(s="0"+s),t<10&&(n="0"+n),s+":"+n}function toggleUpdateEmailContainer(e){jQuery(".send-update-email").stop().fadeToggle()}function yikes_mc_prevent_default_stop_prop(e){e.preventDefault(),e.stopPropagation()}function yikes_mc_toggle_field_label_edit(e){jQuery(e).siblings(".yikes-mc-edit-field-label-input").val(jQuery(e).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-label").val());var i=jQuery(e).siblings(".yikes-mc-expansion-section-field-label, .field-type-text"),t=jQuery(e).siblings(".yikes-mc-edit-field-label-input, .yikes-mc-save-field-label-edits-icon");jQuery(e).hasClass("dashicons-no")?(i=jQuery(e).siblings(".yikes-mc-edit-field-label-input, .yikes-mc-save-field-label-edits-icon"),t=jQuery(e).siblings(".yikes-mc-expansion-section-field-label, .field-type-text"),e.title=yikes_mailchimp_edit_form.edit_field_label_pencil_title):e.title=yikes_mailchimp_edit_form.edit_field_label_cancel_title,jQuery(e).toggleClass("dashicons-no dashicons-edit"),i.fadeToggle().promise().done(function(){t.fadeToggle()})}function yikes_mc_save_field_label_name(e,i,t){var a={action:"save_field_label_edits",list_id:i,field_data:t,nonce:yikes_mailchimp_edit_form.save_field_label_nonce};jQuery.post(yikes_mailchimp_edit_form.ajax_url,a,function(i){if("undefined"!==i&&"undefined"!==i.success)if(!0===i.success){var a=t.field_name;yikes_mc_update_field_label(e,a),yikes_mc_toggle_field_label_edit(jQuery(e).siblings(".dashicons-no"))}else{var s="";"undefined"!==i.data&&"undefined"!==i.data.message&&(s=i.data.message,yikes_mc_display_field_label_error_message(e,s))}})}function yikes_mc_update_field_label(e,i){jQuery(e).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-label").val(i),jQuery(e).siblings(".yikes-mc-expansion-section-field-label").text(i)}function yikes_mc_display_field_label_error_message(e,i){jQuery(e).siblings(".yikes-mc-edit-field-label-message").fadeOut(function(){jQuery(this).text(i).fadeIn()})}window.Yikes_MailChimp_Edit_Form=window.Yikes_MailChimp_Edit_Form||{},window.yikes_mailchimp_edit_form=window.yikes_mailchimp_edit_form||{},function(e,i,t,a,s){"use strict";a.l10n=e.yikes_mailchimp_edit_form||{},t(i).ready(function(){jQuery("#form-builder-container").children().length>0&&jQuery(".edit-form-description-form-builder").hide(),t("body").find("#form-builder-container").sortable({items:".draggable:not(.non-draggable-yikes)",axis:"y",placeholder:"form-builder-placeholder",update:function(){var e=1;jQuery("#form-builder-container").find(".draggable").each(function(){jQuery(this).find(".position-input").val(e),e++})}}),t("body").on("click",".remove-field",function(){var e=jQuery(this).attr("alt"),i=jQuery(this);return t(this).parents(".yikes-mc-settings-expansion-section").prev().find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),t(this).parents(".yikes-mc-settings-expansion-section").slideToggle(450,function(){i.parents(".draggable").find(".expansion-section-title").css("background","rgb(255, 134, 134)"),i.parents(".draggable").fadeOut("slow",function(){jQuery("#available-fields").find('li[alt="'+e+'"]').removeClass("not-available"),jQuery("#available-interest-groups").find('li[alt="'+e+'"]').removeClass("not-available"),jQuery(this).remove(),t("#form-builder-container").find(".draggable").length<1&&(t(".clear-form-fields").hide(),t(".clear-form-fields").next().hide(),t("#form-builder-container").html('<h4 class="no-fields-assigned-notice non-draggable-yikes"><em>'+a.l10n.no_fields_assigned+"</em></h4>"))})}),!1}),t("body").on("click",".hide-field",function(){return t(this).parents(".yikes-mc-settings-expansion-section").slideToggle(450).prev().find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),!1}),t("body").on("click",".add-field-to-editor",function(){return jQuery(".edit-form-description-form-builder").show(),t(".field-to-add-to-form").each(function(){var e=t("#form-builder-container").find(".draggable").length,i=t(this),s=i.attr("alt");t("#available-fields").children("li").removeClass("available-form-field");var n=t(this);n.attr("disabled","disabled").attr("onclick","return false;").removeClass("add-field-to-editor");var r={action:"add_field_to_form",field_name:i.attr("data-attr-field-name"),merge_tag:s,field_type:i.attr("data-attr-field-type"),list_id:i.attr("data-attr-form-id")};t.ajax({url:a.l10n.ajax_url,type:"POST",data:r,dataType:"html",success:function(a,n,r){i.removeClass("field-to-add-to-form").addClass("not-available"),t(".add-field-to-editor").hide(),t(".no-fields-assigned-notice").is(":visible")&&t("#form-builder-container").html(""),t("#form-builder-container").append(a),t(".clear-form-fields").show(),t(".clear-form-fields").next().show(),t(".field-"+s+"-position").val(parseInt(e+1))},error:function(e,i,t){alert(i+e.status+e.responseText+"...")},complete:function(e,i){t("#available-fields").children("li").addClass("available-form-field"),n.removeAttr("disabled").removeAttr("onclick"),t(".add-field-to-editor").hide()}})}),!1}),t("body").on("click",".add-interest-group-to-editor",function(){var e=t("#form-builder-container").find(".draggable").length,i=[];t(".group-to-add-to-form").each(function(){i.push({group_id:t(this).attr("alt"),field_type:t(this).attr("data-attr-field-type"),field_name:t(this).attr("data-attr-field-name")})}),t("#available-interest-groups").children("li").removeClass("available-interest-group");var s=t(this);s.attr("disabled","disabled").attr("onclick","return false;").removeClass("add-interest-group-to-editor");var n={action:"add_interest_group_to_form",interest_groups:i,list_id:t(".group-to-add-to-form").attr("data-attr-form-id")};return t.ajax({url:a.l10n.ajax_url,type:"POST",data:n,dataType:"html",success:function(i,a,s){t(".group-to-add-to-form").removeClass("group-to-add-to-form").addClass("not-available"),t(".add-interest-group-to-editor").hide(),e<1?(t("#form-builder-container").html("").append(i),t(".clear-form-fields").show(),t(".clear-form-fields").next().show()):t("#form-builder-container").append(i)},error:function(e,i,t){alert(i+e.status+e.responseText+"...")},complete:function(e,i){t("#available-interest-groups").children("li").addClass("available-interest-group"),s.removeAttr("disabled").removeAttr("onclick").addClass("add-interest-group-to-editor"),t(".add-interest-group-to-editor").hide()}}),!1}),t(".color-picker").each(function(){t(this).wpColorPicker()}),t("body").on("click",".expansion-section-title",function(){return t(this).next().stop().slideToggle(),t(this).find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),!1}),t("body").on("click",".available-form-field",function(){if(t(this).hasClass("not-available"))return!1;t(this).hasClass("field-to-add-to-form")?(t(this).removeClass("field-to-add-to-form"),t(".add-field-to-editor").stop().fadeOut()):(t(this).toggleClass("field-to-add-to-form"),t(".add-field-to-editor").stop().fadeIn())}),t("body").on("click",".available-interest-group",function(){if(t(this).hasClass("not-available"))return!1;t(this).hasClass("group-to-add-to-form")?t(this).removeClass("group-to-add-to-form"):t(this).toggleClass("group-to-add-to-form"),t(".group-to-add-to-form").length>0?t(".add-interest-group-to-editor").stop().fadeIn():t(".add-interest-group-to-editor").stop().fadeOut()}),t("body").on("click",".hidden_setting",function(){t(".hidden_setting").removeClass("selected_hidden_setting"),t(".selected_setting_triangle").remove(),t(this).addClass("selected_hidden_setting").append('<div class="selected_setting_triangle"></div>');var e=t(this).attr("data-attr-container");t(".hidden-setting-label").hide(),t("#"+e).show()}),t("body").on("click",".close-form-expansion",function(){return t(this).parents(".yikes-mc-settings-expansion-section").slideToggle().prev().find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),!1}),t("body").on("click",".mv_ig_list .nav-tab",function(){return!t(this).hasClass("nav-tab-active")&&(!t(this).hasClass("nav-tab-disabled")&&(t(".mv_ig_list .nav-tab").removeClass("nav-tab-active"),t(".arrow-down").remove(),t(this).addClass("nav-tab-active").prepend('<div class="arrow-down"></div>'),t(".mv_ig_list .nav-tab").addClass("nav-tab-disabled"),"merge-variables"==t(this).attr("alt")?(t("#merge-variables-container").stop().animate({left:"0px"},function(){t(".mv_ig_list .nav-tab").removeClass("nav-tab-disabled")}),t("#interest-groups-container").stop().animate({left:"+=278px"},function(){t(".mv_ig_list .nav-tab").removeClass("nav-tab-disabled")})):(t("#merge-variables-container").stop().animate({left:"-=278px"},function(){t(".mv_ig_list .nav-tab").removeClass("nav-tab-disabled")}),t("#interest-groups-container").stop().animate({left:"-=278px"},function(){t(".mv_ig_list .nav-tab").removeClass("nav-tab-disabled")})),!1))}),t("body").on("click",".clear-form-fields",function(){return confirm(a.l10n.bulk_delete_alert)&&t("#form-builder").find(".draggable").find(".expansion-section-title").each(function(){t(this).css("background","rgb(255, 134, 134)");var e=t(this).parents(".draggable").find(".remove-field").attr("alt");t(this).fadeOut("slow",function(){t("#available-fields").find('li[alt="'+e+'"]').removeClass("not-available"),t("#available-interest-groups").find('li[alt="'+e+'"]').removeClass("not-available"),t(this).remove(),t(".clear-form-fields").hide(),t(".clear-form-fields").next().hide(),t(".available-form-field").each(function(){t(this).removeClass("not-available")}),t("#form-builder-container").html('<h4 class="no-fields-assigned-notice non-draggable-yikes"><em>'+a.l10n.no_fields_assigned+"</em></h4>")})}),!1}),t(".yikes-mc-edit-field-label-icon").click(function(e){yikes_mc_prevent_default_stop_prop(e),jQuery(this).siblings(".yikes-mc-edit-field-label-message").fadeOut(),yikes_mc_toggle_field_label_edit(this)}),t(".yikes-mc-edit-field-label-input").click(function(e){yikes_mc_prevent_default_stop_prop(e)}),t(".yikes-mc-save-field-label-edits-icon").click(function(e){yikes_mc_prevent_default_stop_prop(e),jQuery(this).siblings(".yikes-mc-edit-field-label-message").fadeOut();var i=this,t=jQuery("#form-builder-div").data("list-id"),a=jQuery(this).siblings(".yikes-mc-edit-field-label-input").val(),s={field_name:a,field_id:jQuery(this).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-id").val()};jQuery(this).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-label").val()!==a?yikes_mc_save_field_label_name(i,t,s):yikes_mc_toggle_field_label_edit(jQuery(this).siblings(".yikes-mc-edit-field-label-icon"))}),initialize_form_schedule_time_pickers(),t(".yikes-enable-disable-ajax").click(function(){var e=t("#enable-ajax").is(":checked"),i=t("#redirect-user").is(":checked");!0===e&&!0===i?t(".redirect-new-window-div").fadeIn():t(".redirect-new-window-div").fadeOut()})})}(window,document,jQuery,Yikes_MailChimp_Edit_Form);